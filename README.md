# Poker API

   It's an express server application, that has apis to generate and validate 2 Poker hands with 5 cards each


## Table of Contents

- [Assumptions](#assumptions)
- [Calculations](#calculations)
- [Getting Started](#getting-started)
- [Usage](#usage)
- [Project Structure](#project-structure)


## Assumptions

 - Steel wheel (A-2-3-4-5) is lowest Straight combination possible since Ace playing as Low here
 - each hand has 5 uniq cards
 - there are no same cards (intersections) in hands

## Calculations

 - Poker hands evaluated by rank first and then by score
 - Score is usually calculated by RANK * Highest Card Value 
 - When calculating FullHouse Triples values are in priority. So the formula is Triples Value * FullHouse Ranks value + value of a Pair card.

## Getting Started

To compile and run project make sure you have LTS Node installed. 
You can download node [here](https://nodejs.org/en).

1. From root folder of the project use `npm ci` or `npm i` in your terminal to install project dependencies
2. Make sure you have `.env` file in the root. Here you can change `PORT` on where server should be run.
3. Use `npm run test` - to run tests
4. Use `npm run dev` to compile and run the server



## Usage

When you have server up and running you can use `Postman` or other Api testing tools to use it.

Routes:

1. `GET` - `/v1/poker/get-hands`
   Use this route to receive 2 hands with 5 random cards each, from the same deck.
   You can copy response to use it in `compare-hands` API.

2. `POST` - `v1/poker/compare-hands`
   Use this route to compare 2 hands with 5 random cards each. You should receive one of the following message:
   - `Hand 1 win`
   - `Hand 2 win`
   - `It is a tie`

<details>
   <summary>Body Example:</summary>
   <code>
{
    "hands": [
        [
            {
                "type": "DIAMONDS",
                "value": "KING"
            },
            {
                "type": "DIAMONDS",
                "value": "NINE"
            },
            {
                "type": "DIAMONDS",
                "value": "SEVEN"
            },
            {
                "type": "DIAMONDS",
                "value": "QUEEN"
            },
            {
                "type": "CLUBS",
                "value": "SEVEN"
            }
        ],
        [
            {
                "type": "SPADES",
                "value": "TEN"
            },
            {
                "type": "SPADES",
                "value": "FIVE"
            },
            {
                "type": "HEARTS",
                "value": "TEN"
            },
            {
                "type": "DIAMONDS",
                "value": "FIVE"
            },
            {
                "type": "CLUBS",
                "value": "TEN"
            }
        ]
    ]
   }
   </code>
</details>

## Project Structure

All the logic implemented inside `src/games/Poker.ts` and `src/utils/poker.ts`.
All tests stored using following pattern `**/__test__/*.test.ts`.

Below you can find detailed info about project structure.

I've used express boilerplate to generate basic project structure.


The project follows a customized folder structure to organize its source code and resources efficiently. Here's an overview of the folder structure:

- **src/resources/**: Contains resources organized by domain, with each resource folder containing `schema.ts`, `controller.ts`, and `routes.ts` files for that specific resource.
- **src/games/**: Instead of `services` I decided to use `games` folder name. Here you can find `BaseGame` class that should be a parent to any other future `Game` class. This way we can keep intuitive structure. Each `Game` class should implement `evaluate` and `generateHand` methods, that will hold the game logic. In my case it's only a `Poker` game, and only with 2 players (hands).
- **src/utils/**: Any helper functions will be stored here. All functions should be categorized by game and stored in the file that named same to the game e.g. `poker.ts`. 
- **src/entities/**: Here you can find all entities as well as some static values (enums) used in the project, created in OOP manner. Main objects are: `Card`, `Deck`, and `Hand`


Files that was autogenerated and mostly not touched by me:

- **src/server.ts**: Entry point for the Express server.
- **src/app.ts**: Defines the Express application.
- **src/common/**: Contains common files and utilities used across the project, such as `env.ts` for managing environment variables and `logger.ts` for logging.
- **src/middlewares/**: Contains middleware functions used in the Express application.



## Credits

Create Express TypeScript Starter was created by [Wubshet Zeleke](https://linkedin.com/in/wubshet-zeleke) and is maintained by the open-source community.

## License
Create Express TypeScript Starter is licensed under the MIT License.
